var ae=Object.defineProperty;var P=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var T=(h,r,v)=>r in h?ae(h,r,{enumerable:!0,configurable:!0,writable:!0,value:v}):h[r]=v,U=(h,r)=>{for(var v in r||(r={}))oe.call(r,v)&&T(h,v,r[v]);if(P)for(var v of P(r))ue.call(r,v)&&T(h,v,r[v]);return h};import{d as le,p as B,x as se,B as re,r as w,o as F,h as S,e as s,w as m,g as x,b as I,s as ie,F as V,i as O,f as N,C as de,D as z,t as fe}from"./vendor.1eacb0d1.js";import{o as G,u as me,i as pe}from"./index.es.3d20c51f.js";const K=(h,r)=>Math.floor(Math.random()*(r-h))+h,ce=N("Start"),ye=N("Reset"),ve=["onClick","onContextmenu"],Ce=N(" Game Over :D "),he=le({setup(h){const r=9,v=24,$=9,A=30,D=10,R=668,L=.1,W=.93,k={custom:{difficulty:"custom",rowCount:r,colCount:$,mineCount:D},easy:{difficulty:"easy",rowCount:9,colCount:9,mineCount:10},medium:{difficulty:"medium",rowCount:16,colCount:16,mineCount:40},hard:{difficulty:"hard",rowCount:16,colCount:30,mineCount:99}},H=G(k).map(t=>({label:t,value:t})),C={default:"default",playing:"playing",ended:"ended"},d={default:"default",flagged:"flagged",opened:"opened"},f={bomb:"bomb",empty:"empty",number:"number"};let b=B(C.default),g=B([]);const J=(t,e)=>{var n,l,p;const o=g.value[t][e];if(o.status===d.default)return o.type===f.bomb&&b.value===C.ended?"\u{1F4A3}":"";if(o.status===d.flagged)return o.type===f.bomb&&b.value===C.ended?"\u{1F4A3}":"\u26A0\uFE0F";if(o.type===f.bomb)return"\u{1F4A3}";if(o.type===f.number){let a=0;for(let i=t-1;i<=t+1;i+=1)for(let c=e-1;c<=e+1;c+=1)a+=((p=(l=(n=g.value)==null?void 0:n[i])==null?void 0:l[c])==null?void 0:p.type)===f.bomb?1:0;return a}return""},Q=(t,e)=>{var o,n,l,p;if(b.value!==C.ended&&g.value[t][e].status!==d.opened){b.value=C.playing;const a=[...g.value];if(a[t][e].type===f.bomb||a[t][e].type===f.number)a[t][e].type===f.bomb&&(b.value=C.ended),a[t][e].status=d.opened;else{let i=[{row:t,col:e}];for(;i.length>0;){const{row:c,col:_}=i.shift();if(a[c][_].status!==d.opened&&(a[c][_].status=d.opened),a[c][_].type===f.empty){for(let u=c-1;u<=c+1;u+=1)for(let M=_-1;M<=_+1;M+=1)(((n=(o=a==null?void 0:a[u])==null?void 0:o[M])==null?void 0:n.status)===d.default||((p=(l=a==null?void 0:a[u])==null?void 0:l[M])==null?void 0:p.status)===d.flagged)&&i.push({row:u,col:M});i=me(i,pe)}}}g.value=a}},X=(t,e)=>{if(b.value!==C.ended&&g.value[t][e].status!==d.opened){b.value=C.playing;const o=[...g.value];o[t][e].status=o[t][e].status===d.default?d.flagged:d.default,g.value=o}};se(()=>{b.value!==C.ended&&g.value.length>0&&g.value.filter(t=>t.some(e=>e.status!==d.opened&&e.type!==f.bomb)).length===0&&(b.value=C.ended)});let y=B(U({},k.easy));const Y=re.useForm(y.value),Z=t=>{y.value=U({},k[t])},E=()=>{var n,l;const{rowCount:t,colCount:e,mineCount:o}=y.value;y.value.difficulty=(l=(n=Object.values(k).find(p=>p.rowCount===t&&p.colCount===e&&p.mineCount===o))==null?void 0:n.difficulty)!=null?l:"custom"},ee=async(t,e)=>{const{rowCount:o=r,colCount:n=$}=y.value,l=e/o/n;return l>=L&&l<=W?Promise.resolve():Promise.reject(new Error("Unsuitable density"))},te=async()=>{var p,a;const{rowCount:t,colCount:e,mineCount:o}=y.value,n=Array.from({length:t}).map(()=>Array.from({length:e}).map(()=>({type:f.empty,status:d.default})));let l=0;for(;l<o;){const i=K(0,t),c=K(0,e);if(n[i][c].type!==f.bomb){n[i][c].type=f.bomb;for(let _=i-1;_<=i+1;_+=1)for(let u=c-1;u<=c+1;u+=1)((a=(p=n==null?void 0:n[_])==null?void 0:p[u])==null?void 0:a.type)===f.empty&&(n[_][u].type=f.number);l+=1}}g.value=n,b.value=C.default};return(t,e)=>{const o=w("a-select"),n=w("a-form-item"),l=w("a-col"),p=w("a-input-number"),a=w("a-button"),i=w("a-row"),c=w("a-form"),_=w("a-typography-paragraph");return F(),S(V,null,[s(c,{class:"justify-center",model:y.value,colon:!1,onFinish:te},{default:m(()=>[s(i,{gutter:16},{default:m(()=>[s(l,{span:12,lg:5},{default:m(()=>[s(n,{name:"difficulty",label:"Difficulty",rules:[{type:"enum",enum:x(G)(x(k)),required:!0,message:"Please select"}]},{default:m(()=>[s(o,{value:y.value.difficulty,"onUpdate:value":e[0]||(e[0]=u=>y.value.difficulty=u),options:x(H),onChange:Z},null,8,["value","options"])]),_:1},8,["rules"])]),_:1}),s(l,{span:12,lg:5},{default:m(()=>[s(n,{name:"rowCount",label:"Row",rules:[{type:"number",min:r,max:v,required:!0,message:`Should between ${r} and ${v}`}]},{default:m(()=>[s(p,{value:y.value.rowCount,"onUpdate:value":e[1]||(e[1]=u=>y.value.rowCount=u),min:r,max:v,precision:0,class:"w-full",onChange:E},null,8,["value"])]),_:1},8,["rules"])]),_:1}),s(l,{span:12,lg:5},{default:m(()=>[s(n,{name:"colCount",label:"Col",rules:[{type:"number",min:$,max:A,required:!0,message:`Should between ${$} and ${A}`}]},{default:m(()=>[s(p,{value:y.value.colCount,"onUpdate:value":e[2]||(e[2]=u=>y.value.colCount=u),min:$,max:A,precision:0,class:"w-full",onChange:E},null,8,["value"])]),_:1},8,["rules"])]),_:1}),s(l,{span:12,lg:5},{default:m(()=>[s(n,{name:"mineCount",label:"Mine","validate-first":!0,rules:[{type:"number",min:D,max:R,required:!0,message:`Should between ${D} and ${R}`},{validator:ee}]},{default:m(()=>[s(p,{value:y.value.mineCount,"onUpdate:value":e[3]||(e[3]=u=>y.value.mineCount=u),min:D,max:R,precision:0,class:"w-full",onChange:E},null,8,["value"])]),_:1},8,["rules"])]),_:1}),s(l,{span:12,lg:4,class:"text-center lg:text-left"},{default:m(()=>[s(n,null,{default:m(()=>[s(a,{type:"primary","html-type":"submit",class:"mr-2"},{default:m(()=>[ce]),_:1}),s(a,{"html-type":"button",onClick:e[4]||(e[4]=u=>x(Y).resetFields())},{default:m(()=>[ye]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),s(i,{class:"flex-col my-4 overflow-x-auto"},{default:m(()=>[(F(!0),S(V,null,O(g.value,(u,M)=>(F(),I(i,{key:M,class:"mx-auto flex-nowrap"},{default:m(()=>[(F(!0),S(V,null,O(u,(j,q)=>(F(),S("div",{key:q,class:de(`flex justify-center items-center w-5 h-5 m-px transition flex-none ${b.value===x(C).ended?"cursor-default":"cursor-pointer"} ${j.status===x(d).opened&&j.type===x(f).bomb?"bg-red-300":""} ${j.status===x(d).opened&&j.type!==x(f).bomb?"bg-gray-300":""} ${j.status!==x(d).opened?"bg-gray-400":""}`),role:"button",tabindex:"-1",onClick:z(ne=>Q(M,q),["prevent","stop"]),onContextmenu:z(ne=>X(M,q),["prevent","stop"])},fe(J(M,q)),43,ve))),128))]),_:2},1024))),128))]),_:1}),b.value===x(C).ended?(F(),I(_,{key:0,class:"text-center"},{default:m(()=>[Ce]),_:1})):ie("",!0)],64)}}});export{he as default};
